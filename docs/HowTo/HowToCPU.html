
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>How to use the CPU core &#8212; Moira v2.2</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="How to use the disassembler" href="HowToDisassembler.html" />
    <link rel="prev" title="Getting started" href="../Tutorials/GettingStarted.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"><img src="https://dirkwhoffmann.github.io/Moira/images/banner-mo-1.jpg" width="100%" alt="Banner"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Moira v2.2</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Overview
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Overview/About.html">
   About
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Tutorials/GettingStarted.html">
   Getting started
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  How-to guides
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   How to use the CPU core
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HowToDisassembler.html">
   How to use the disassembler
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HowToDebugger.html">
   How to use the debugger
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="HowToDelegation.html">
   How to use the delegation system
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Reference/ConfigOptions.html">
   Configuration options
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>
<a href="https://dirkwhoffmann.github.io/Moira/"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="bottom"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/HowTo/HowToCPU.md.txt"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-custom-cpu">
   Creating a custom CPU
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-the-custom-cpu">
   Running the custom CPU
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#querying-cpu-properties">
   Querying CPU properties
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#managing-interrupts">
   Managing interrupts
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#synchronizing-the-cpu">
   Synchronizing the CPU
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tweaking-memory-access">
   Tweaking memory access
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>How to use the CPU core</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#creating-a-custom-cpu">
   Creating a custom CPU
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#running-the-custom-cpu">
   Running the custom CPU
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#querying-cpu-properties">
   Querying CPU properties
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#managing-interrupts">
   Managing interrupts
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#synchronizing-the-cpu">
   Synchronizing the CPU
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tweaking-memory-access">
   Tweaking memory access
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="how-to-use-the-cpu-core">
<h1>How to use the CPU core<a class="headerlink" href="#how-to-use-the-cpu-core" title="Permalink to this heading">#</a></h1>
<p>To integrate Moira into your own application, copy the contents of subfolder <code class="docutils literal notranslate"><span class="pre">Moira</span></code> to your application. All other files are only needed to create the test application.</p>
<section id="creating-a-custom-cpu">
<h2>Creating a custom CPU<a class="headerlink" href="#creating-a-custom-cpu" title="Permalink to this heading">#</a></h2>
<p>By default, Moira is configured to declare all functions that require a custom implementation as virtual. By doing so, Moira follows the basic C++ design principle which means that a custom CPU is created by sub-classing. A minimal custom CPU looks like this:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;Moira.h&quot;</span><span class="cp"></span>
<span class="w">    </span>
<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">CPU</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">moira</span><span class="o">::</span><span class="n">Moira</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="n">u8</span><span class="w"> </span><span class="nf">read8</span><span class="p">(</span><span class="n">u32</span><span class="w"> </span><span class="n">addr</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="n">u16</span><span class="w"> </span><span class="nf">read16</span><span class="p">(</span><span class="n">u32</span><span class="w"> </span><span class="n">addr</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">write8</span><span class="w"> </span><span class="p">(</span><span class="n">u32</span><span class="w"> </span><span class="n">addr</span><span class="p">,</span><span class="w"> </span><span class="n">u8</span><span class="w">  </span><span class="n">val</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">write16</span><span class="w"> </span><span class="p">(</span><span class="n">u32</span><span class="w"> </span><span class="n">addr</span><span class="p">,</span><span class="w"> </span><span class="n">u16</span><span class="w"> </span><span class="n">val</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Moira</span></code> is an abstract class that requires the implementation of the four mentioned methods. These functions provide the basic functionality for transferring bytes or words between the CPU and memory.</p>
<p>Alternatively, Moira can be configured to declare all interfacing functions as non-virtual to speed up emulation. This solution has been chosen by vAmiga to achieve maximum speed.</p>
<p>After instantiating an object of your custom CPU class, the CPU needs to be configured. The most important property is the emulated CPU type which can be selected by the following API functions:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setModel(Model</span> <span class="pre">cpuModel)</span></code></p>
<p>Currently supported CPU models are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">M68000</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M68010</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M68EC020</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M68020</span></code></p></li>
</ul>
<p>This functions configures both the CPU core and the disassembler.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setModel(Model</span> <span class="pre">cpuModel,</span> <span class="pre">Model</span> <span class="pre">dasmModel)</span></code></p>
<p>This function configures the CPU core and the disassembler seperately. The functions is usefuls, because the disassembler supports a broader range of CPU models. Whereas the emulated CPU core is restricted to the models mentioned above, the disassembler is capable of producing output for higher-end CPUs, too. These CPUs are specified by the following keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">M68EC030</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M68030</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M68EC040</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M68LC040</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M68040</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="running-the-custom-cpu">
<h2>Running the custom CPU<a class="headerlink" href="#running-the-custom-cpu" title="Permalink to this heading">#</a></h2>
<p>After the class has been instantiated, the CPU is ready to use. The following two API functions are the main entry points for running the device:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">reset()</span></code></p>
<p>Initiates the CPUâ€™s internal reset procedure.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">execute()</span></code></p>
<p>Executes the CPU for one instruction.</p>
</li>
</ul>
<p>Please make sure to reset the CPU before executing any instruction.</p>
<p>Internally, Moira holds a variable called <code class="docutils literal notranslate"><span class="pre">clock</span></code> which counts the number of CPU cycles that have elapsed since power-up. The following code utilizes the <code class="docutils literal notranslate"><span class="pre">clock</span></code> variable to run the CPU until a certain amount of cycles have been executed:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">i64</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cpu</span><span class="p">.</span><span class="n">getClock</span><span class="p">();</span><span class="w"></span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">cpu</span><span class="p">.</span><span class="n">getClock</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">  </span><span class="n">cpu</span><span class="p">.</span><span class="n">execute</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Keep in mind that Moira always executes a single instruction as a whole. This means that the above code is likely to execute slightly more than 1000 cycles in most cases.</p>
</section>
<section id="querying-cpu-properties">
<h2>Querying CPU properties<a class="headerlink" href="#querying-cpu-properties" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">Moira</span></code> class provides a variety of functions for querying the CPU state. The following incomprehensive list contains the most important ones:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">getD(int</span> <span class="pre">n)</span> <span class="pre">const</span></code></p>
<p>Reads the current value from a data register.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">getA(int</span> <span class="pre">n)</span> <span class="pre">const</span></code></p>
<p>Reads the current value from an address register.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">getPC()</span> <span class="pre">const</span></code></p>
<p>Reads the current value of the program counter. Keep in mind that the program counter is a moving target. It progresses while an instruction is executed.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">getPC0()</span> <span class="pre">const</span></code></p>
<p>Returns the address of the currently executed instruction. Unlike the program counter, the instruction address always points to the start address of the current instruction. It matches the program counter when execution begins and remains unchanged until the next instruction is processed. In most scenarios, <code class="docutils literal notranslate"><span class="pre">getPC0</span></code> is the function you want to call, and not <code class="docutils literal notranslate"><span class="pre">getPC</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">getCCR()</span> <span class="pre">const</span></code></p>
<p>Returns the CCR part of the status register.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">getSR()</span> <span class="pre">const</span></code></p>
<p>Returns the entire status register, including the CCR part.</p>
</li>
</ul>
</section>
<section id="managing-interrupts">
<h2>Managing interrupts<a class="headerlink" href="#managing-interrupts" title="Permalink to this heading">#</a></h2>
<p>The Motorola 68000 CPU has three interrupt pins that are accessible from outside. The values of these pins encode the so-called Interrupt Priority Level (IPL) which ranges from 0 to 7 and is set to 0 on reset. The IPL pins can be accessed with the following API functions:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">getIPL()</span></code></p>
<p>Returns the current interrupt level set on the IPL pins.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">setIPL(u8</span> <span class="pre">level)</span></code></p>
<p>Sets the IPL pins to the specified value.</p>
</li>
</ul>
</section>
<section id="synchronizing-the-cpu">
<h2>Synchronizing the CPU<a class="headerlink" href="#synchronizing-the-cpu" title="Permalink to this heading">#</a></h2>
<p>One of the key features of Moira is to provide information about the number of cycles that have passed between two bus accesses. This information is transmitted via the following delegation function:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">sync(int</span> <span class="pre">cycles)</span></code></p>
<p>This function is called each time the CPU accesses memory. The passed integer value indicates the number of cycles that have elapsed since the last call of this function. The default implementation simply adds up the passed cycle counts:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sync</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">cycles</span><span class="p">)</span><span class="w"> </span>
<span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="n">clock</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">cycles</span><span class="p">;</span><span class="w">  </span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>In vAmiga this function is utilized to emulate bus sharing between the CPU and the custom chip set. As soon as the CPU tries to access memory, vAmiga intercepts the access in <code class="docutils literal notranslate"><span class="pre">sync()</span></code> and emulates the external hardware up to the point in time the CPU has already reached. When the actual memory access happens, vAmiga can determine exactly whether the bus is blocked or not. If it is, the CPU is virtually suspended by increasing variable <code class="docutils literal notranslate"><span class="pre">clock</span></code> by a certain number of wait states.</p>
</li>
</ul>
</section>
<section id="tweaking-memory-access">
<h2>Tweaking memory access<a class="headerlink" href="#tweaking-memory-access" title="Permalink to this heading">#</a></h2>
<p>Keep in mind that during the reset process the Motorola 68000 CPU reads the initial stack pointer and program counter from memory. This means that the memory must be fully initialized before calling reset(). However, you can easily work around this restriction by implementing the following function in your subclass:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">read16OnReset(u32</span> <span class="pre">addr)</span></code></p>
<p>Once implemented, Moira accesses memory with this function during reset. Hence, the initial stack pointer and the program counter can be passed to the CPU even without memory being ready for operation.</p>
</li>
</ul>
<p>The disassembler is subject to a similar issue. By default it calls <code class="docutils literal notranslate"><span class="pre">read16()</span></code> to read data words from memory. This default behaviour is not adequate, e.g., for emulating an Amiga, because reading certain registers causes side effects. In Moira this problem can be avoided by redirecting the disassembler to another read function. This is done by implementing</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">read16Dasm(u32</span> <span class="pre">addr)</span></code></p>
<p>If this function is implemented in your subclass, it should return the exact same values as the already implemented function <code class="docutils literal notranslate"><span class="pre">read16()</span></code> would. Only side effects which would occur on real hardware are not carried out.</p>
</li>
</ul>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="../Tutorials/GettingStarted.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Getting started</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="HowToDisassembler.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">How to use the disassembler</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Dirk W. Hoffmann<br/>
  
      &copy; Copyright 2022, Dirk W. Hoffmann.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>